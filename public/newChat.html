<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNEAPEE AI Neuro 1.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Minimalist Black & White Palette
                        'light-bg': '#F8F8F8', // Near white for light mode
                        'dark-bg': '#121212', // Near black for dark mode
                        'light-primary': '#FFFFFF', // Pure white elements
                        'dark-primary': '#000000', // Pure black elements
                        'light-text': '#222222', // Dark text on light background
                        'dark-text': '#EEEEEE', // Light text on dark background
                        'light-border': '#D0D0D0', // Light gray border
                        'dark-border': '#333333', // Dark gray border
                        'accent-gray': '#AAAAAA', // Subtler gray for secondary text/icons
                    },
                    fontFamily: {
                        // Keeping SF Pro for a clean, system-like feel
                        'sf': ['-apple-system', 'BlinkMacSystemFont', 'SF Pro Display', 'system-ui', 'sans-serif'],
                    },
                    backdropBlur: {
                        'xs': '4px', // Slightly more blur for minimalist glass
                        'sm': '8px',
                        'md': '16px',
                        'lg': '24px',
                        'xl': '32px',
                    },
                    animation: {
                        // Simplified animations, if any, to match minimalist tone
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.6s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': {
                                opacity: 0
                            },
                            '100%': {
                                opacity: 1
                            },
                        },
                        slideUp: {
                            '0%': {
                                transform: 'translateY(20px)',
                                opacity: 0
                            },
                            '100%': {
                                transform: 'translateY(0)',
                                opacity: 1
                            },
                        },
                    },
                }
            }
        }
    </script>
    <link
        href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
            /* Ensure body allows scroll by default */
        }

        /* Minimalist Glassmorphism Styles */
        .minimal-glass {
            background: rgba(255, 255, 255, 0.4);
            /* Lighter background for light mode */
            backdrop-filter: blur(8px) saturate(1.2);
            -webkit-backdrop-filter: blur(8px) saturate(1.2);
            border: 1px solid rgba(0, 0, 0, 0.1);
            /* Subtle black border */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            /* Minimal shadow */
            transition: all 0.2s ease-in-out;
        }

        .dark .minimal-glass {
            background: rgba(30, 30, 30, 0.6);
            /* Darker background for dark mode */
            backdrop-filter: blur(12px) saturate(1.2);
            -webkit-backdrop-filter: blur(12px) saturate(1.2);
            border: 1px solid rgba(255, 255, 255, 0.08);
            /* Subtle white border */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            /* Slightly more prominent shadow in dark mode */
        }

        .minimal-button {
            background: #000000;
            /* Pure black button in light mode */
            color: #FFFFFF;
            /* Pure white text */
            transition: all 0.2s ease-in-out;
            border: 1px solid #000000;
        }

        .minimal-button:hover {
            background: #333333;
            /* Darker on hover */
            border-color: #333333;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .dark .minimal-button {
            background: #FFFFFF;
            /* Pure white button in dark mode */
            color: #000000;
            /* Pure black text */
            border: 1px solid #FFFFFF;
        }

        .dark .minimal-button:hover {
            background: #EEEEEE;
            /* Lighter on hover */
            border-color: #EEEEEE;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(255, 255, 255, 0.1);
        }

        .message-bubble {
            backdrop-filter: blur(8px) saturate(1.2);
            -webkit-backdrop-filter: blur(8px) saturate(1.2);
            transition: all 0.3s ease-in-out;
        }

        .user-message-bubble {
            background: #000000;
            /* Black for user messages */
            color: #FFFFFF;
            border: 1px solid #000000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .dark .user-message-bubble {
            background: #FFFFFF;
            /* White for user messages in dark mode */
            color: #000000;
            border: 1px solid #FFFFFF;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
        }

        .ai-message-bubble {
            background: rgba(255, 255, 255, 0.6);
            /* Semi-transparent white for AI */
            color: #222222;
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .dark .ai-message-bubble {
            background: rgba(30, 30, 30, 0.8);
            /* Semi-transparent black for AI in dark mode */
            color: #EEEEEE;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .minimal-input {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(8px) saturate(1.2);
            -webkit-backdrop-filter: blur(8px) saturate(1.2);
            border: 1px solid rgba(0, 0, 0, 0.15);
            color: #222222;
            transition: all 0.2s ease-in-out;
        }

        .dark .minimal-input {
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #EEEEEE;
        }

        .minimal-input:focus {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #000000;
            /* Black focus border */
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
        }

        .dark .minimal-input:focus {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid #FFFFFF;
            /* White focus border */
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .floating-orbs {
            display: none;
            /* Hide floating orbs for minimalist design */
        }

        /* Scrollbar for minimalist design */
        .scroll-container {
            scrollbar-width: thin;
            scrollbar-color: #888888 transparent;
            /* thumb and track color */
        }

        .scroll-container::-webkit-scrollbar {
            width: 8px;
        }

        .scroll-container::-webkit-scrollbar-track {
            background: transparent;
        }

        .scroll-container::-webkit-scrollbar-thumb {
            background-color: #888888;
            border-radius: 4px;
            border: 2px solid transparent;
            /* Gives a detached look */
        }

        .dark .scroll-container::-webkit-scrollbar-thumb {
            background-color: #666666;
        }

        .ios-icon-minimal {
            /* Minimalist icon background */
            background: #000000;
            color: #FFFFFF;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .dark .ios-icon-minimal {
            background: #FFFFFF;
            color: #000000;
            box-shadow: 0 2px 5px rgba(255, 255, 255, 0.1);
        }

        /* Typing dots for minimalist design */
        .typing-dots {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #555555;
            animation: fadeIn 1.4s ease-in-out infinite;
            /* Simpler animation */
        }

        .dark .typing-dot {
            background: #AAAAAA;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        .quick-action-card-minimal {
            background: rgba(255, 255, 255, 0.5);
            /* Lighter card background */
            backdrop-filter: blur(8px) saturate(1.2);
            -webkit-backdrop-filter: blur(8px) saturate(1.2);
            border: 1px solid rgba(0, 0, 0, 0.08);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
            transition: all 0.2s ease-in-out;
        }

        .dark .quick-action-card-minimal {
            background: rgba(30, 30, 30, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.06);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .quick-action-card-minimal:hover {
            transform: translateY(-4px);
            /* Reduced lift on hover */
            background: rgba(255, 255, 255, 0.7);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }

        .dark .quick-action-card-minimal:hover {
            background: rgba(30, 30, 30, 0.9);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        /* Status dot simplified */
        .status-dot-minimal {
            width: 6px;
            height: 6px;
            background: #4CAF50;
            /* A simple green */
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
            animation: fadeIn 2s ease-in-out infinite alternate;
        }

        .ios-control {
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            cursor: pointer;
            transition: all 0.15s ease-out;
            /* Faster, snappier control transitions */
        }

        .ios-control:active {
            transform: scale(0.98);
            /* Minimal bounce */
        }

        .sidebar-blur-minimal {
            backdrop-filter: blur(12px) saturate(1.2);
            -webkit-backdrop-filter: blur(12px) saturate(1.2);
            background: rgba(255, 255, 255, 0.8);
            /* Lighter sidebar */
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark .sidebar-blur-minimal {
            background: rgba(18, 18, 18, 0.9);
            /* Darker sidebar */
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .navigation-blur-minimal {
            backdrop-filter: blur(8px) saturate(1.2);
            -webkit-backdrop-filter: blur(8px) saturate(1.2);
            background: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark .navigation-blur-minimal {
            background: rgba(0, 0, 0, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Removed gradient-text and replaced with regular text colors */
        .text-normal {
            color: #222222;
            /* Default text color in light mode */
        }

        .dark .text-normal {
            color: #EEEEEE;
            /* Default text color in dark mode */
        }

        /* Corrected Responsive adjustments */
        /* Default for larger screens */
        .sidebar {
            width: 20rem;
            /* Fixed width for desktop */
            position: relative;
            /* Not fixed on desktop */
            left: 0;
            /* Always visible on desktop */
            height: 100%;
            z-index: 20;
            /* Lower z-index than mobile overlay */
            transition: none;
            /* No transition needed on desktop */
        }

        .main-content {
            flex: 1;
            /* Take remaining space */
            width: auto;
            /* Auto width on desktop */
            margin-left: 0;
            transition: none;
            /* No transition needed on desktop */
        }

        /* Mobile specific styles */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: -20rem;
                /* Hidden by default */
                height: 100%;
                width: 20rem;
                /* Fixed width for sidebar on mobile */
                z-index: 50;
                /* Bring above main content and overlay */
                transition: left 0.3s ease-in-out;
            }

            .sidebar.open {
                left: 0;
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            }

            .main-content {
                width: 100%;
                /* Always 100% width on mobile */
                margin-left: 0;
                /* No margin shift on mobile */
                transition: margin-left 0.3s ease-in-out;
                /* Transition for visual consistency, though no shift */
            }

            /* No .main-content.shifted needed anymore, as main content stays 100% width */

            .welcome-section {
                padding-top: 4rem;
                /* Adjust padding for smaller screens */
                padding-bottom: 4rem;
            }

            .welcome-heading {
                font-size: 2.5rem;
                /* Smaller heading on mobile */
            }

            .welcome-subheading {
                font-size: 1rem;
            }

            .quick-action-grid {
                grid-template-columns: 1fr;
                /* Stack cards on mobile */
            }

            .ios-icon-welcome {
                width: 5rem;
                height: 5rem;
            }

            .quick-action-card-minimal {
                padding: 1.5rem;
                /* Smaller padding for cards on mobile */
            }

            .message-bubble {
                max-width: 90% !important;
                /* Allow bubbles to take more width */
            }

            .navigation-header-text {
                font-size: 0.75rem;
                /* Smaller text for the navigation header */
                line-height: 1.4;
            }

            .input-area {
                padding: 1rem;
                /* Adjust padding for the input area */
            }

            .sidebar-overlay {
                display: none;
                /* Hidden by default */
            }

            .sidebar-overlay.active {
                display: block;
            }
        }
    </style>
</head>

<body class="bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text font-sf h-screen flex overflow-hidden md:overflow-auto">
    <div id="sidebar"
        class="w-80 flex-shrink-0 sidebar-blur-minimal flex flex-col z-50 fixed top-0 left-[-20rem] h-full transition-all duration-300 ease-in-out md:relative md:left-0 md:flex">
        <div class="p-4 sm:p-6 border-b border-light-border dark:border-dark-border flex-shrink-0">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center">
                    <div class="ios-icon-minimal w-10 h-10 mr-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                            </path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-light-text dark:text-dark-text">CNEAPEE AI</h1>
                        <p class="text-sm text-accent-gray">Neuro 1.1 Pro</p>
                    </div>
                </div>
                <button id="theme-toggle" class="ios-control p-2 rounded-xl minimal-glass">
                    <svg class="w-5 h-5 text-light-text dark:text-dark-text" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                        </path>
                    </svg>
                </button>
            </div>
            <div class="flex items-center">
                <div class="status-dot-minimal mr-2 rounded-full"></div>
                <span class="text-sm font-medium text-accent-gray">Online</span>
            </div>
        </div>

        <div class="p-4 sm:p-6 flex-shrink-0">
            <button id="new-chat"
                class="ios-control w-full minimal-button text-white px-4 py-3 sm:px-6 sm:py-4 rounded-xl font-semibold flex items-center justify-center shadow-sm">
                <svg class="w-4 h-4 sm:w-5 sm:h-5 mr-2 sm:mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
                New Conversation
            </button>
        </div>

        <div class="flex-1 overflow-hidden flex flex-col">
            <div class="p-4 sm:p-6">
                <h3 class="text-lg font-semibold mb-4 text-accent-gray">Recent</h3>
                <div id="chat-history" class="space-y-3 overflow-y-auto scroll-container h-full">
                    <div class="ios-control p-3 sm:p-4 rounded-xl minimal-glass cursor-pointer">
                        <div class="font-medium text-sm sm:text-base mb-1">AI Development Discussion</div>
                        <div class="text-xs sm:text-sm text-accent-gray">2 hours ago</div>
                    </div>
                    <div class="ios-control p-3 sm:p-4 rounded-xl minimal-glass cursor-pointer">
                        <div class="font-medium text-sm sm:text-base mb-1">Code Review Session</div>
                        <div class="text-xs sm:text-sm text-accent-gray">Yesterday</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-4 sm:p-6 border-t border-light-border dark:border-dark-border flex-shrink-0">
            <div class="ios-control flex items-center p-3 sm:p-4 rounded-xl minimal-glass cursor-pointer">
                <div class="ios-icon-minimal w-8 h-8 sm:w-10 sm:h-10 mr-3">
                    <span class="font-semibold text-sm sm:text-base">U</span>
                </div>
                <div class="flex-1">
                    <div class="font-semibold text-sm sm:text-base">User Profile</div>
                    <div class="text-xs sm:text-sm text-accent-gray">Settings & Preferences</div>
                </div>
                <svg class="w-4 h-4 sm:w-5 sm:h-5 text-accent-gray" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
        </div>
    </div>

    <div id="sidebar-overlay" class="sidebar-overlay fixed inset-0 bg-black/50 z-40 transition-opacity duration-300">
    </div>

    <div class="flex-1 flex flex-col main-content relative">
        <div class="navigation-blur-minimal p-3 sm:p-4 flex-shrink-0">
            <div class="flex items-center justify-between">
                <button id="mobile-sidebar-toggle" class="md:hidden p-2 rounded-md minimal-glass mr-3 ios-control">
                    <svg class="w-6 h-6 text-light-text dark:text-dark-text" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <div class="flex-1">
                    <span class="text-xs sm:text-sm font-medium text-accent-gray navigation-header-text">
 Developer Beta releasing in Spring 2026 
                    </span>
                </div>
            </div>
        </div>

        <div id="messages-container" class="flex-1 overflow-y-auto scroll-container p-4 sm:p-6">
            <div class="max-w-4xl mx-auto text-center py-8 sm:py-16 animate-fade-in welcome-section">
                <div class="mb-6 sm:mb-8">
                    <div
                        class="ios-icon-minimal w-20 h-20 sm:w-24 sm:h-24 mx-auto mb-4 sm:mb-6 rounded-2xl flex items-center justify-center shadow-lg ios-icon-welcome">
                        <svg class="w-10 h-10 sm:w-12 sm:h-12 text-white" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                            </path>
                        </svg>
                    </div>
                    <h1 class="text-3xl sm:text-5xl font-bold text-light-text dark:text-dark-text mb-3 sm:mb-4 welcome-heading">
                        Welcome to CNEAPEE AI</h1>
                    <p class="text-base sm:text-xl text-accent-gray max-w-2xl mx-auto leading-relaxed welcome-subheading">
                        Experience the future of AI conversation with our advanced neural network technology and a
                        minimalist interface.
                    </p>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mt-8 sm:mt-12 quick-action-grid">
                    <div class="quick-action-card-minimal ios-control p-6 sm:p-8 rounded-2xl cursor-pointer quick-action"
                        data-action="conversation">
                        <div class="ios-icon-minimal w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4">
                            <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
                                </path>
                            </svg>
                        </div>
                        <h3 class="text-base sm:text-lg font-bold mb-2 text-light-text dark:text-dark-text">Start
                            Conversation</h3>
                        <p class="text-sm text-accent-gray">Begin an intelligent dialogue with AI</p>
                    </div>

                    <div class="quick-action-card-minimal ios-control p-6 sm:p-8 rounded-2xl cursor-pointer quick-action"
                        data-action="code">
                        <div class="ios-icon-minimal w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4">
                            <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                            </svg>
                        </div>
                        <h3 class="text-base sm:text-lg font-bold mb-2 text-light-text dark:text-dark-text">Code
                            Assistant</h3>
                        <p class="text-sm text-accent-gray">Get expert programming help</p>
                    </div>

                    <div class="quick-action-card-minimal ios-control p-6 sm:p-8 rounded-2xl cursor-pointer quick-action"
                        data-action="creative">
                        <div class="ios-icon-minimal w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4">
                            <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z">
                                </path>
                            </svg>
                        </div>
                        <h3 class="text-base sm:text-lg font-bold mb-2 text-light-text dark:text-dark-text">Creative
                            Ideas</h3>
                        <p class="text-sm text-accent-gray">Explore creative possibilities</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-4 sm:p-6 border-t border-light-border dark:border-dark-border flex-shrink-0 input-area">
            <div class="max-w-4xl mx-auto">
                <div class="flex items-center justify-between mb-3 sm:mb-4">
                    <div class="flex items-center space-x-2 sm:space-x-3">
                        <button class="ios-control p-2 sm:p-3 rounded-lg minimal-glass" title="Attach file">
                            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-light-text dark:text-dark-text" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13">
                                </path>
                            </svg>
                        </button>
                        <button class="ios-control p-2 sm:p-3 rounded-lg minimal-glass" title="Voice input">
                            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-light-text dark:text-dark-text" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <button class="ios-control p-2 sm:p-3 rounded-lg minimal-glass" title="Settings">
                        <svg class="w-4 h-4 sm:w-5 sm:h-5 text-light-text dark:text-dark-text" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                            </path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                    </button>
                </div>

                <div class="relative">
                    <textarea id="message-input" placeholder="Message CNEAPEE AI..."
                        class="w-full p-4 pr-14 sm:p-6 sm:pr-16 minimal-input rounded-xl sm:rounded-2xl resize-none text-base sm:text-lg font-medium placeholder-accent-gray outline-none"
                        rows="1" style="min-height: 56px; max-height: 150px;"></textarea>
                    <button id="send-button"
                        class="ios-control absolute right-3 bottom-3 sm:right-4 sm:bottom-4 minimal-button text-white p-3 sm:p-4 rounded-lg sm:rounded-xl shadow-sm">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                        </svg>
                    </button>
                </div>

                <div class="flex justify-between items-center mt-2 px-1 sm:px-2">
                    <div class="text-xs sm:text-sm text-accent-gray">
                        <span id="char-count">0/4000</span>
                    </div>
                    <div class="text-xs sm:text-sm text-accent-gray hidden sm:block"> Press ⌘ + Enter to send
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class CNEAPEEAILiquidGlass {
            constructor() {
                this.messages = [];
                this.currentChatId = null;
                this.isTyping = false;
                this.messageCounter = 0;
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadTheme();
                this.autoResizeTextarea();
                this.initializeWelcomeCards();
                this.loadChatHistory();
            }

            bindEvents() {
                const themeToggle = document.getElementById('theme-toggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.toggleTheme();
                    });
                }

                const newChatBtn = document.getElementById('new-chat');
                if (newChatBtn) {
                    newChatBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.startNewChat();
                    });
                }

                const sendButton = document.getElementById('send-button');
                if (sendButton) {
                    sendButton.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.sendMessage();
                    });
                }

                const messageInput = document.getElementById('message-input');
                if (messageInput) {
                    messageInput.addEventListener('keydown', (e) => {
                        if ((e.key === 'Enter' && (e.metaKey || e.ctrlKey)) || (e.key === 'Enter' && !e.shiftKey)) {
                            e.preventDefault();
                            this.sendMessage();
                        }
                    });

                    messageInput.addEventListener('input', () => {
                        this.updateCharCount();
                        this.autoResizeTextarea();
                    });
                }

                document.addEventListener('keydown', (e) => {
                    if (e.metaKey || e.ctrlKey) {
                        if (e.key === 'n') {
                            e.preventDefault();
                            this.startNewChat();
                        } else if (e.key === '/') {
                            e.preventDefault();
                            if (messageInput) messageInput.focus();
                        }
                    }
                });

                const mobileSidebarToggle = document.getElementById('mobile-sidebar-toggle');
                if (mobileSidebarToggle) {
                    mobileSidebarToggle.addEventListener('click', toggleSidebar);
                }

                // Close sidebar when clicking overlay
                const sidebarOverlay = document.getElementById('sidebar-overlay');
                if (sidebarOverlay) {
                    sidebarOverlay.addEventListener('click', toggleSidebar);
                }
            }

            toggleTheme() {
                const html = document.documentElement;
                html.classList.toggle('dark');
                const isDark = html.classList.contains('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');

                const themeIcon = document.querySelector('#theme-toggle svg');
                if (themeIcon) {
                    themeIcon.style.transform = 'scale(0)';
                    setTimeout(() => {
                        if (isDark) {
                            themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
                        } else {
                            themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
                        }
                        themeIcon.style.transform = 'scale(1)';
                    }, 150);
                }
            }

            loadTheme() {
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                    document.documentElement.classList.add('dark');
                }
            }

            startNewChat() {
                if (this.messages.length > 0) {
                    this.saveChatToHistory();
                }

                this.currentChatId = Date.now().toString();
                this.messages = [];
                this.messageCounter = 0;
                this.clearMessages();
                this.showWelcomeMessage();

                setTimeout(() => {
                    const messageInput = document.getElementById('message-input');
                    if (messageInput) {
                        messageInput.focus();
                    }
                }, 300);
            }

            sendMessage() {
                const input = document.getElementById('message-input');
                if (!input) return;

                const message = input.value.trim();
                if (!message || this.isTyping || message.length > 4000) return;

                this.addMessage(message, 'user');
                input.value = '';
                this.updateCharCount();
                this.autoResizeTextarea();

                this.simulateAIResponse(message);
            }

            addMessage(content, sender, options = {}) {
                const messagesContainer = document.getElementById('messages-container');
                if (!messagesContainer) return;

                const messageElement = document.createElement('div');
                messageElement.className = 'animate-fade-in mb-4 sm:mb-6';

                const isUser = sender === 'user';
                const timestamp = new Date().toLocaleTimeString([], {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                const messageHTML = `
                    <div class="flex ${isUser ? 'justify-end' : 'justify-start'}">
                        <div class="max-w-xs sm:max-w-2xl ${isUser ? 'user-message-bubble text-white' : 'ai-message-bubble'} message-bubble rounded-xl sm:rounded-2xl p-4 sm:p-5 shadow-sm">
                            ${!isUser ? `
                                <div class="flex items-center mb-2">
                                    <div class="ios-icon-minimal w-7 h-7 sm:w-8 sm:h-8 mr-2 rounded-md">
                                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <span class="font-semibold text-sm sm:text-base text-light-text dark:text-dark-text">AI Assistant</span>
                                    <span class="text-xs sm:text-sm text-accent-gray ml-auto">${timestamp}</span>
                                </div>
                            ` : `
                                <div class="flex items-center justify-end mb-2">
                                    <span class="text-xs sm:text-sm text-white/70 mr-2">${timestamp}</span>
                                    <span class="font-semibold text-sm sm:text-base text-white">You</span>
                                </div>
                            `}
                            <div class="text-sm sm:text-base leading-relaxed font-medium">${this.formatMessage(content)}</div>
                            ${!isUser && options.showActions ? `
                                <div class="flex items-center space-x-3 mt-3 pt-3 border-t border-black/10 dark:border-white/10">
                                    <button class="ios-control text-xs sm:text-sm text-accent-gray hover:text-light-text dark:hover:text-dark-text transition-colors flex items-center">
                                        <svg class="w-3 h-3 sm:w-4 h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                        </svg>
                                        Copy
                                    </button>
                                    <button class="ios-control text-xs sm:text-sm text-accent-gray hover:text-light-text dark:hover:text-dark-text transition-colors flex items-center">
                                        <svg class="w-3 h-3 sm:w-4 h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                        </svg>
                                        Like
                                    </button>
                                    <button class="ios-control text-xs sm:text-sm text-accent-gray hover:text-light-text dark:hover:text-dark-text transition-colors flex items-center">
                                        <svg class="w-3 h-3 sm:w-4 h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                        Retry
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;

                messageElement.innerHTML = messageHTML;
                messagesContainer.appendChild(messageElement);
                this.scrollToBottom();

                this.messages.push({
                    content,
                    sender,
                    timestamp: Date.now(),
                    id: ++this.messageCounter
                });

                this.autoSaveChat();
            }

            simulateAIResponse(userMessage) {
                this.isTyping = true;
                this.showTypingIndicator();

                const processingTime = Math.min(1000 + (userMessage.length * 6), 3000);

                setTimeout(() => {
                    this.hideTypingIndicator();
                    const response = this.generateAIResponse(userMessage);
                    this.addMessage(response, 'ai', {
                        showActions: true
                    });
                    this.isTyping = false;
                }, processingTime);
            }

            generateAIResponse(userMessage) {
                const responses = [
                    "I'm here to provide a clear and concise response tailored to your needs.",
                    "Let's explore this topic with precision and insight.",
                    "Thank you for your question. I'm ready to assist with detailed information.",
                    "A relevant inquiry. I'll provide a direct and helpful answer.",
                    "I'm ready to offer valuable insights. What specific details can I clarify?"
                ];

                const contextualResponse = responses[Math.floor(Math.random() * responses.length)];

                if (userMessage.toLowerCase().includes('code') || userMessage.toLowerCase().includes('programming')) {
                    return contextualResponse + " I can help with code examples, structure, and debugging strategies.";
                } else if (userMessage.toLowerCase().includes('creative') || userMessage.toLowerCase().includes('idea')) {
                    return contextualResponse + " I can assist with brainstorming and innovative concepts.";
                } else if (userMessage.toLowerCase().includes('help') || userMessage.toLowerCase().includes('support')) {
                    return contextualResponse + " I provide comprehensive support. Feel free to ask more.";
                }

                return contextualResponse;
            }

            showTypingIndicator() {
                const messagesContainer = document.getElementById('messages-container');
                if (!messagesContainer) return;

                const typingElement = document.createElement('div');
                typingElement.id = 'typing-indicator';
                typingElement.className = 'animate-fade-in mb-4 sm:mb-6';
                typingElement.innerHTML = `
                    <div class="flex justify-start">
                        <div class="ai-message-bubble message-bubble rounded-xl sm:rounded-2xl p-4 sm:p-5 shadow-sm">
                            <div class="flex items-center">
                                <div class="ios-icon-minimal w-7 h-7 sm:w-8 sm:h-8 mr-2 rounded-md">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <span class="font-semibold text-sm sm:text-base mr-2 text-light-text dark:text-dark-text">AI is thinking</span>
                                <div class="typing-dots">
                                    <div class="typing-dot rounded-full"></div>
                                    <div class="typing-dot rounded-full"></div>
                                    <div class="typing-dot rounded-full"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                messagesContainer.appendChild(typingElement);
                this.scrollToBottom();
            }

            hideTypingIndicator() {
                const typingIndicator = document.getElementById('typing-indicator');
                if (typingIndicator) {
                    typingIndicator.style.opacity = '0';
                    setTimeout(() => typingIndicator.remove(), 200);
                }
            }

            formatMessage(message) {
                return message
                    .replace(/\n/g, '<br>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold">$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em class="italic">$1</em>')
                    .replace(/`(.*?)`/g, '<code class="bg-black/5 dark:bg-white/5 px-1.5 py-0.5 rounded-md text-sm font-mono">$1</code>');
            }

            updateCharCount() {
                const input = document.getElementById('message-input');
                const charCount = document.getElementById('char-count');
                const sendButton = document.getElementById('send-button');

                if (!input || !charCount || !sendButton) return;

                const count = input.value.length;
                charCount.textContent = `${count}/4000`;

                if (count > 3800) {
                    charCount.style.color = '#FF4500';
                } else if (count > 3950) {
                    charCount.style.color = '#FF0000';
                } else {
                    charCount.style.color = '';
                }

                sendButton.disabled = count === 0 || count > 4000;
                sendButton.style.opacity = sendButton.disabled ? '0.6' : '1';
            }

            autoResizeTextarea() {
                const textarea = document.getElementById('message-input');
                if (!textarea) return;

                textarea.style.height = 'auto';
                textarea.style.height = Math.min(textarea.scrollHeight, 150) + 'px';
            }

            clearMessages() {
                const messagesContainer = document.getElementById('messages-container');
                if (messagesContainer) {
                    messagesContainer.innerHTML = '';
                }
            }

            showWelcomeMessage() {
                this.clearMessages();
                const messagesContainer = document.getElementById('messages-container');
                if (!messagesContainer) return;

                messagesContainer.innerHTML = `
                    <div class="max-w-4xl mx-auto text-center py-8 sm:py-16 animate-fade-in welcome-section">
                        <div class="mb-6 sm:mb-8">
                            <div class="ios-icon-minimal w-20 h-20 sm:w-24 sm:h-24 mx-auto mb-4 sm:mb-6 rounded-2xl flex items-center justify-center shadow-lg ios-icon-welcome">
                                <svg class="w-10 h-10 sm:w-12 sm:h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                            <h1 class="text-3xl sm:text-5xl font-bold text-light-text dark:text-dark-text mb-3 sm:mb-4 welcome-heading">Welcome to CNEAPEE AI</h1>
                            <p class="text-base sm:text-xl text-accent-gray max-w-2xl mx-auto leading-relaxed welcome-subheading">Experience the future of AI conversation with our advanced neural network technology and a minimalist interface.</p>
                        </div>

                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mt-8 sm:mt-12 quick-action-grid">
                            <div class="quick-action-card-minimal ios-control p-6 sm:p-8 rounded-2xl cursor-pointer quick-action" data-action="conversation">
                                <div class="ios-icon-minimal w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4">
                                    <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-base sm:text-lg font-bold mb-2 text-light-text dark:text-dark-text">Start Conversation</h3>
                                <p class="text-sm text-accent-gray">Begin an intelligent dialogue with AI</p>
                            </div>

                            <div class="quick-action-card-minimal ios-control p-6 sm:p-8 rounded-2xl cursor-pointer quick-action" data-action="code">
                                <div class="ios-icon-minimal w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4">
                                    <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                                    </svg>
                                </div>
                                <h3 class="text-base sm:text-lg font-bold mb-2 text-light-text dark:text-dark-text">Code Assistant</h3>
                                <p class="text-sm text-accent-gray">Get expert programming help</p>
                            </div>

                            <div class="quick-action-card-minimal ios-control p-6 sm:p-8 rounded-2xl cursor-pointer quick-action" data-action="creative">
                                <div class="ios-icon-minimal w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4">
                                    <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-base sm:text-lg font-bold mb-2 text-light-text dark:text-dark-text">Creative Ideas</h3>
                                <p class="text-sm text-accent-gray">Explore creative possibilities</p>
                            </div>
                        </div>
                    </div>
                `;

                this.initializeWelcomeCards();
            }

            scrollToBottom() {
                const messagesContainer = document.getElementById('messages-container');
                if (messagesContainer) {
                    messagesContainer.scrollTo({
                        top: messagesContainer.scrollHeight,
                        behavior: 'smooth'
                    });
                }
            }

            saveChatToHistory() {
                if (this.messages.length === 0) return;

                const chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '[]');
                const firstMessage = this.messages.find(m => m.sender === 'user');
                const title = firstMessage ?
                    firstMessage.content.substring(0, 30) + (firstMessage.content.length > 30 ? '...' : '') :
                    'New Conversation';

                // Check if a chat with this ID already exists and update it, otherwise add new
                const existingChatIndex = chatHistory.findIndex(chat => chat.id === this.currentChatId);
                if (existingChatIndex !== -1) {
                    chatHistory[existingChatIndex] = {
                        id: this.currentChatId,
                        title,
                        messages: this.messages,
                        timestamp: Date.now()
                    };
                    // Move to front
                    const [movedChat] = chatHistory.splice(existingChatIndex, 1);
                    chatHistory.unshift(movedChat);
                } else {
                    chatHistory.unshift({
                        id: this.currentChatId,
                        title,
                        messages: this.messages,
                        timestamp: Date.now()
                    });
                }


                localStorage.setItem('chatHistory', JSON.stringify(chatHistory.slice(0, 20)));
                this.loadChatHistory();
            }

            loadChatHistory() {
                const chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '[]');
                const historyContainer = document.getElementById('chat-history');

                if (!historyContainer) return;

                if (chatHistory.length === 0) {
                    historyContainer.innerHTML = '<div class="text-center text-accent-gray text-sm py-4">No conversations yet</div>';
                    return;
                }

                historyContainer.innerHTML = chatHistory.map(chat => {
                    const date = new Date(chat.timestamp).toLocaleDateString();
                    return `
                        <div class="ios-control p-3 sm:p-4 rounded-xl minimal-glass cursor-pointer chat-history-item" data-chat-id="${chat.id}">
                            <div class="font-medium text-sm sm:text-base mb-1 text-light-text dark:text-dark-text">${chat.title}</div>
                            <div class="text-xs sm:text-sm text-accent-gray">${date}</div>
                        </div>
                    `;
                }).join('');

                document.querySelectorAll('.chat-history-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const chatId = item.dataset.chatId;
                        this.loadChatFromHistory(chatId);
                        toggleSidebar(); // Close sidebar after selecting chat on mobile
                    });
                });
            }

            loadChatFromHistory(chatId) {
                const chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '[]');
                const chat = chatHistory.find(c => c.id === chatId);

                if (!chat) return;

                this.currentChatId = chatId;
                this.messages = chat.messages;
                this.clearMessages();

                chat.messages.forEach(message => {
                    this.addMessage(message.content, message.sender, {
                        showActions: message.sender === 'ai'
                    });
                });
            }

            autoSaveChat() {
                if (this.messages.length > 0) {
                    clearTimeout(this.autoSaveTimeout);
                    this.autoSaveTimeout = setTimeout(() => {
                        this.saveChatToHistory();
                    }, 3000);
                }
            }

            initializeWelcomeCards() {
                setTimeout(() => {
                    const quickActions = document.querySelectorAll('.quick-action');
                    quickActions.forEach(card => {
                        card.addEventListener('click', (e) => {
                            e.preventDefault();

                            const action = card.dataset.action;
                            const input = document.getElementById('message-input');

                            const prompts = {
                                conversation: "Hello! I'd love to start a conversation. What fascinating topics can we explore together today?",
                                code: "I'm working on a programming project and could use some expert guidance. Can you help me with coding challenges and best practices?",
                                creative: "I'm looking for creative inspiration and fresh ideas. Can you help me brainstorm and think outside the box?"
                            };

                            if (input) {
                                input.value = prompts[action] || '';
                                input.focus();
                                this.autoResizeTextarea();
                                this.updateCharCount();

                                card.style.transform = 'scale(0.98)';
                                setTimeout(() => {
                                    card.style.transform = 'scale(1)';
                                }, 100);
                            }
                        });
                    });
                }, 100);
            }
        }

        // Global function for mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const body = document.body; // Reference to body

            if (sidebar && overlay && body) {
                sidebar.classList.toggle('left-[-20rem]'); // Hidden state
                sidebar.classList.toggle('left-0'); // Open state
                overlay.classList.toggle('active'); // Show/hide overlay
                body.classList.toggle('overflow-hidden'); // Prevent scrolling body
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            document.body.style.opacity = '0';
            document.body.style.transform = 'scale(0.99)';

            setTimeout(() => {
                document.body.style.transition = 'all 0.4s ease-out';
                document.body.style.opacity = '1';
                document.body.style.transform = 'scale(1)';

                setTimeout(() => {
                    new CNEAPEEAILiquidGlass();
                }, 100);
            }, 50);
        });
    </script>
</body>

</html>